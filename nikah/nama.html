async function generatePDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();

  // فارم کے فیلڈز سے ڈیٹا حاصل کریں
  const groomName = document.getElementById('groomName').value;
  const groomFather = document.getElementById('groomFather').value;
  const brideName = document.getElementById('brideName').value;
  const brideFather = document.getElementById('brideFather').value;
  const wakeelName = document.getElementById('wakeelName').value;
  const wakeelFather = document.getElementById('wakeelFather').value;
  const witness1 = document.getElementById('witness1').value;
  const witness1Father = document.getElementById('witness1Father').value;
  const witness2 = document.getElementById('witness2').value;
  const witness2Father = document.getElementById('witness2Father').value;
  const groomAadhaar = document.getElementById('groomAadhaar').value;
  const brideAadhaar = document.getElementById('brideAadhaar').value;
  const mehrAmount = document.getElementById('mehrAmount').value;
  const nikahDate = formatDate(document.getElementById('nikahDate').value);
  const place = document.getElementById('place').value;
  const qariName = document.getElementById('qariName').value;

  // تصویریں
  const groomPhoto = document.getElementById('groomPhoto').files[0];
  const bridePhoto = document.getElementById('bridePhoto').files[0];

  doc.setFont("helvetica", "normal");
  doc.setFontSize(16);
  doc.setTextColor(40, 90, 130);
  doc.text("OFFICE OF THE QUAZAAT", 105, 20, { align: "center" });
  doc.text("Androon Qila Mudgal. 584125 Tq. Lingsugur Dist. Raichur, Karnataka", 105, 30, { align: "center" });
  doc.text("CHIEF QUAZI: MAULANA QUAZI ZAMEER AHMAD AZHARI", 105, 40, { align: "center" });
  doc.text("Cell No. 9916922473", 105, 50, { align: "center" });

  doc.setFontSize(14);
  doc.setTextColor(0, 0, 0);
  let y = 65;

  doc.text(`Groom: ${groomName} s/o ${groomFather}`, 20, y); y += 10;
  doc.text(`Bride: ${brideName} d/o ${brideFather}`, 20, y); y += 10;
  doc.text(`Wakeel: ${wakeelName} s/o ${wakeelFather}`, 20, y); y += 10;
  doc.text(`Witness 1: ${witness1} s/o ${witness1Father}`, 20, y); y += 10;
  doc.text(`Witness 2: ${witness2} s/o ${witness2Father}`, 20, y); y += 10;
  doc.text(`Groom Aadhaar: ${groomAadhaar}`, 20, y); y += 10;
  doc.text(`Bride Aadhaar: ${brideAadhaar}`, 20, y); y += 10;
  doc.text(`Mehr Amount: ${mehrAmount}`, 20, y); y += 10;
  doc.text(`Nikah Date: ${nikahDate}`, 20, y); y += 10;
  doc.text(`Place: ${place}`, 20, y); y += 10;
  doc.text(`Qari: ${qariName}`, 20, y); y += 20;

  // ⚠️ تصویریں شامل کریں
  function addImage(file, x, y, width, height, callback) {
    if (!file) {
      callback();
      return;
    }
    const reader = new FileReader();
    reader.onload = function (e) {
      const imgData = e.target.result;
      doc.addImage(imgData, "JPEG", x, y, width, height);
      callback();
    };
    reader.readAsDataURL(file);
  }

  addImage(groomPhoto, 20, y, 40, 50, () => {
    addImage(bridePhoto, 80, y, 40, 50, () => {
      const fileName = `NikahNama-${groomName}-${brideName}.pdf`;
      doc.save(fileName);
    });
  });
}
