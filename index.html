<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>نکاح نامہ اندراج - فارم محکمہ عالیہ شرعیہ دارالقضاء مدگل</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Nastaliq+Urdu&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Noto Nastaliq Urdu', serif;
      background: linear-gradient(135deg, #c1dff0, #e6f1f7);
      color: #2c3e50;
      margin: 0;
      padding: 30px 15px;
      direction: rtl;
      text-align: right;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    header {
      background-color: #024b61;
      color: #f0f6f7;
      padding: 25px 20px;
      border-radius: 14px;
      width: 100%;
      max-width: 650px;
      box-shadow: 0 6px 12px rgba(2, 75, 97, 0.5);
      text-align: center;
      margin-bottom: 30px;
    }
    header h1 {
      margin: 0;
      font-size: 32px;
      letter-spacing: 1px;
    }
    header p {
      margin-top: 8px;
      font-size: 18px;
      font-weight: 600;
      font-style: italic;
      color: #dce9ee;
    }

    .form-section {
      background-color: #ffffffcc;
      backdrop-filter: saturate(180%) blur(15px);
      padding: 30px 25px;
      border-radius: 16px;
      box-shadow: 0 8px 24px rgba(44, 62, 80, 0.12);
      width: 100%;
      max-width: 650px;
    }

    label {
      display: block;
      margin-top: 20px;
      font-weight: 700;
      font-size: 18px;
      color: #1a3c52;
      user-select: none;
      transition: color 0.3s ease;
    }
    input[type="text"],
    input[type="date"],
    input[type="file"] {
      width: 100%;
      padding: 12px 15px;
      margin-top: 8px;
      font-size: 17px;
      border: 2.5px solid #75a3bc;
      border-radius: 12px;
      outline: none;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
      background-color: #f7fafc;
      color: #1a3c52;
      font-family: 'Noto Nastaliq Urdu', serif;
    }
    input[type="text"]:focus,
    input[type="date"]:focus,
    input[type="file"]:focus {
      border-color: #0d5c84;
      box-shadow: 0 0 8px #0d5c84aa;
      background-color: #eaf6fb;
    }

    button {
      width: 100%;
      margin-top: 30px;
      padding: 14px 0;
      font-size: 20px;
      font-weight: 700;
      color: #f0f6f7;
      background: linear-gradient(45deg, #006a98, #004b6b);
      border: none;
      border-radius: 14px;
      cursor: pointer;
      box-shadow: 0 5px 15px rgba(0, 75, 107, 0.7);
      transition: background 0.4s ease, box-shadow 0.3s ease;
      font-family: 'Noto Nastaliq Urdu', serif;
    }
    button:hover {
      background: linear-gradient(45deg, #004b6b, #002f43);
      box-shadow: 0 7px 18px rgba(0, 75, 107, 0.85);
    }

    /* Responsive */
    @media (max-width: 700px) {
      body, header, .form-section {
        padding: 15px 10px;
        max-width: 100%;
      }
      header h1 {
        font-size: 26px;
      }
      header p {
        font-size: 16px;
      }
      label {
        font-size: 16px;
        margin-top: 15px;
      }
      input[type="text"],
      input[type="date"],
      input[type="file"] {
        font-size: 15px;
        padding: 10px 12px;
      }
      button {
        font-size: 18px;
        padding: 12px 0;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>نکاح نامہ اندراج</h1>
    <p>محکمہ عالیہ شرعیہ دارالقضاء مدگل</p>
  </header>

  <section class="form-section">
    <label for="groomName">دلہا کا نام</label>
    <input type="text" id="groomName" name="groomName" />

    <label for="brideName">دلہن کا نام</label>
    <input type="text" id="brideName" name="brideName" />

    <label for="groomAadhaar">دلہا آدھار نمبر</label>
    <input type="text" id="groomAadhaar" name="groomAadhaar" />

    <label for="brideAadhaar">دلہن آدھار نمبر</label>
    <input type="text" id="brideAadhaar" name="brideAadhaar" />

    <label for="mehr">مہر کی رقم</label>
    <input type="text" id="mehr" name="mehr" />

    <label for="nikahDate">نکاح کی تاریخ</label>
    <input type="date" id="nikahDate" name="nikahDate" />

    <label for="groomImage">تصویر دلہا</label>
    <input type="file" id="groomImage" name="groomImage" accept="image/*" />

    <label for="brideImage">تصویر دلہن</label>
    <input type="file" id="brideImage" name="brideImage" accept="image/*" />

    <button onclick="submitForm()">محفوظ کریں</button>
  </section>

  <script>
    async function toBase64(file) {
      return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onload = () => resolve(reader.result);
        reader.onerror = reject;
      });
    }

    async function submitForm() {
      try {
        const groomImageFile = document.getElementById("groomImage").files[0];
        const brideImageFile = document.getElementById("brideImage").files[0];

        const groomImageBase64 = groomImageFile ? await toBase64(groomImageFile) : "";
        const brideImageBase64 = brideImageFile ? await toBase64(brideImageFile) : "";

        const data = {
          groomName: document.getElementById("groomName").value.trim(),
          brideName: document.getElementById("brideName").value.trim(),
          groomAadhaar: document.getElementById("groomAadhaar").value.trim(),
          brideAadhaar: document.getElementById("brideAadhaar").value.trim(),
          mehr: document.getElementById("mehr").value.trim(),
          nikahDate: document.getElementById("nikahDate").value,
          groomImage: groomImageBase64,
          brideImage: brideImageBase64
        };

        if (!data.groomName || !data.brideName || !data.nikahDate) {
          alert("براہ کرم دلہا، دلہن کے نام اور نکاح کی تاریخ ضرور درج کریں۔");
          return;
        }

        const response = await fetch("https://script.google.com/macros/s/AKfycbzyBjsioHut6ZeWagrMwPzA9xNOUjuJHMJfZpBCm2x4L6joZuenEzid4pQhrEVdEk4g/exec", {
          method: "POST",
          body: JSON.stringify(data),
          headers: {
            "Content-Type": "application/json"
          }
        });

        if (response.ok) {
          alert("فارم کامیابی سے محفوظ ہو گیا ہے۔");
          // فارم ری سیٹ کریں
          ["groomName", "brideName", "groomAadhaar", "brideAadhaar", "mehr", "nikahDate", "groomImage", "brideImage"].forEach(id => {
            const el = document.getElementById(id);
            if (el) {
              if (el.type === "file") el.value = "";
              else el.value = "";
            }
          });
        } else {
          alert("ڈیٹا محفوظ کرنے میں مسئلہ آیا۔");
        }
      } catch (error) {
        alert("کچھ غلط ہو گیا: " + error);
      }
    }
  </script>
</body>
</html>
